<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarifs - Web Locations</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        .pack-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
        }

        .pack-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(99, 102, 241, 0.25);
        }

        .pack-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);
            transform: scale(1.02);
        }

        .pack-card.selected::before {
            content: "‚úì S√©lectionn√©";
            position: absolute;
            top: -12px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .option-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .option-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.2);
        }

        .option-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);
        }

        .price-display {
            position: sticky;
            top: 100px;
            transition: all 0.4s ease;
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo" style="display: flex; align-items: center;">
                <img src="images/logowebduo.png" alt="WebDuo" style="height: 100px;">
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
                <li><a href="tarifs.html">Tarifs</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <div style="padding-top: 120px; min-height: 100vh; background: linear-gradient(135deg, rgba(99, 102, 241, 0.03) 0%, rgba(236, 72, 153, 0.03) 100%);">
        <section style="padding: 60px 0;">
            <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 2rem;">
                <div style="text-align: center; margin-bottom: 4rem;">
                    <div style="display: inline-block; background: var(--gradient); padding: 0.5rem 1.2rem; border-radius: 50px; color: white; font-weight: 700; font-size: 0.9rem; margin-bottom: 1rem;">
                        NOS PACKS
                    </div>
                    <h1 style="font-size: 3.5rem; font-weight: 900; margin-bottom: 1rem; color: var(--dark);">
                        Choisissez votre <span style="background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">formule</span>
                    </h1>
                    <p style="font-size: 1.3rem; color: var(--gray); max-width: 700px; margin: 0 auto;">
                        S√©lectionnez un pack et personnalisez-le selon vos besoins
                    </p>
                </div>

                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; align-items: start;">
                    <!-- Options √† gauche -->
                    <div>
                        <!-- Choix du pack -->
                        <div style="background: white; padding: 2.5rem; border-radius: 24px; box-shadow: var(--shadow-md); margin-bottom: 2rem;">
                            <div style="margin-bottom: 2rem;">
                                <div style="display: inline-block; background: var(--gradient); color: white; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">√âTAPE 1</div>
                                <h2 style="font-size: 2rem; font-weight: 900; color: var(--dark); margin-bottom: 0.5rem;">üì¶ Quel pack vous convient ?</h2>
                                <p style="color: var(--gray); margin: 0;">Choisissez la base qui correspond √† vos besoins</p>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;" id="pack-options">
                                <!-- Pack Essentiel -->
                                <div class="pack-card selected" data-value="250" data-label="Pack Essentiel" data-pack="essentiel" style="padding: 2rem 1.5rem; background: white; border-radius: 20px; box-shadow: var(--shadow-sm);">
                                    <div style="font-size: 2.5rem; margin-bottom: 1rem; text-align: center;">üìÑ</div>
                                    <strong style="display: block; color: var(--dark); margin-bottom: 0.5rem; font-size: 1.2rem; text-align: center;">Essentiel</strong>
                                    <div style="text-align: center; margin-bottom: 1.5rem;">
                                        <span style="color: var(--primary); font-weight: 900; font-size: 2rem;">250‚Ç¨</span>
                                    </div>
                                    <div style="font-size: 0.85rem; color: var(--gray); line-height: 1.8;">
                                        <div class="feature-item">‚úì Site vitrine 2-3 pages</div>
                                        <div class="feature-item">‚úì Galerie photos</div>
                                        <div class="feature-item">‚úì Formulaire de contact</div>
                                        <div class="feature-item">‚úì Version mobile responsive</div>
                                    </div>
                                </div>

                                <!-- Pack Confort -->
                                <div class="pack-card" data-value="400" data-label="Pack Confort" data-pack="confort" style="padding: 2rem 1.5rem; background: white; border-radius: 20px; box-shadow: var(--shadow-sm);">
                                    <div style="font-size: 2.5rem; margin-bottom: 1rem; text-align: center;">üìÖ</div>
                                    <strong style="display: block; color: var(--dark); margin-bottom: 0.5rem; font-size: 1.2rem; text-align: center;">Confort</strong>
                                    <div style="text-align: center; margin-bottom: 1.5rem;">
                                        <span style="color: var(--accent); font-weight: 900; font-size: 2rem;">400‚Ç¨</span>
                                    </div>
                                    <div style="font-size: 0.85rem; color: var(--gray); line-height: 1.8;">
                                        <div class="feature-item">‚úì Tout du pack Essentiel</div>
                                        <div class="feature-item">‚úì Calendrier de disponibilit√©</div>
                                        <div class="feature-item">‚úì Syst√®me de r√©servation</div>
                                        <div class="feature-item">‚úì Page tarifs d√©taill√©e</div>
                                    </div>
                                </div>

                                <!-- Pack Premium -->
                                <div class="pack-card" data-value="600" data-label="Pack Premium" data-pack="premium" style="padding: 2rem 1.5rem; background: white; border-radius: 20px; box-shadow: var(--shadow-sm);">
                                    <div style="font-size: 2.5rem; margin-bottom: 1rem; text-align: center;">üåü</div>
                                    <strong style="display: block; color: var(--dark); margin-bottom: 0.5rem; font-size: 1.2rem; text-align: center;">Premium</strong>
                                    <div style="text-align: center; margin-bottom: 1.5rem;">
                                        <span style="color: var(--secondary); font-weight: 900; font-size: 2rem;">600‚Ç¨</span>
                                    </div>
                                    <div style="font-size: 0.85rem; color: var(--gray); line-height: 1.8;">
                                        <div class="feature-item">‚úì Tout du pack Confort</div>
                                        <div class="feature-item">‚úì Paiement en ligne s√©curis√©</div>
                                        <div class="feature-item">‚úì Gestion multi-langues</div>
                                        <div class="feature-item">‚úì Synchronisation plateformes</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Support -->
                        <div style="background: white; padding: 2.5rem; border-radius: 24px; box-shadow: var(--shadow-md); margin-bottom: 2rem;">
                            <div style="margin-bottom: 2rem;">
                                <div style="display: inline-block; background: var(--gradient-2); color: white; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">√âTAPE 2</div>
                                <h2 style="font-size: 2rem; font-weight: 900; color: var(--dark); margin-bottom: 0.5rem;">üîÑ Combien de temps de support ?</h2>
                                <p style="color: var(--gray); margin: 0;">Mises √† jour et modifications gratuites</p>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;" id="support-options">
                                <div class="option-card selected" data-value="0" data-label="1 mois" style="padding: 1.5rem; background: white; border-radius: 16px; text-align: center; box-shadow: var(--shadow-sm);">
                                    <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üìÖ</div>
                                    <strong style="display: block; color: var(--dark); margin-bottom: 0.3rem; font-size: 1.1rem;">1 mois</strong>
                                    <span style="color: var(--primary); font-weight: 700;">Inclus</span>
                                </div>
                                <div class="option-card" data-value="50" data-label="3 mois" style="padding: 1.5rem; background: white; border-radius: 16px; text-align: center; box-shadow: var(--shadow-sm);">
                                    <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üóìÔ∏è</div>
                                    <strong style="display: block; color: var(--dark); margin-bottom: 0.3rem; font-size: 1.1rem;">3 mois</strong>
                                    <span style="color: var(--accent); font-weight: 700;">+50‚Ç¨</span>
                                </div>
                                <div class="option-card" data-value="200" data-label="1 an" style="padding: 1.5rem; background: white; border-radius: 16px; text-align: center; box-shadow: var(--shadow-sm);">
                                    <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üìÜ</div>
                                    <strong style="display: block; color: var(--dark); margin-bottom: 0.3rem; font-size: 1.1rem;">1 an</strong>
                                    <span style="color: var(--secondary); font-weight: 700;">+200‚Ç¨</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- R√©capitulatif prix √† droite -->
                    <div>
                        <div class="price-display" style="background: var(--gradient); padding: 2.5rem; border-radius: 24px; color: white; box-shadow: 0 20px 60px rgba(99, 102, 241, 0.3);">
                            <h3 style="font-size: 1.3rem; font-weight: 800; margin-bottom: 1.5rem; opacity: 0.95;">Votre devis</h3>

                            <div id="selected-options" style="margin-bottom: 1.5rem; min-height: 120px;">
                                <div style="font-size: 0.95rem; opacity: 0.9; margin-bottom: 1rem;">Votre configuration :</div>
                                <div id="options-list" style="font-size: 0.9rem; line-height: 2;">
                                    <div>‚úì Pack Essentiel</div>
                                    <div>‚úì Support 1 mois (inclus)</div>
                                </div>
                            </div>

                            <div style="border-top: 2px solid rgba(255, 255, 255, 0.3); padding-top: 1.5rem; margin-top: 1.5rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                                    <span style="font-size: 1.2rem; font-weight: 700;">TOTAL</span>
                                    <span id="total-price" style="font-size: 3rem; font-weight: 900;">250‚Ç¨</span>
                                </div>

                                <a href="paiement.html" style="display: block; width: 100%; padding: 1.2rem; background: white; color: var(--primary); text-align: center; border-radius: 12px; text-decoration: none; font-weight: 700; font-size: 1.1rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); transition: all 0.3s; margin-bottom: 1rem;">
                                    üîí Payer maintenant
                                </a>

                                <a href="contact.html" style="display: block; width: 100%; padding: 1rem; background: rgba(255,255,255,0.2); color: white; text-align: center; border-radius: 12px; text-decoration: none; font-weight: 600; font-size: 1rem; border: 2px solid rgba(255,255,255,0.3); transition: all 0.3s;">
                                    üí¨ Demander un devis personnalis√©
                                </a>

                                <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(255,255,255,0.15); border-radius: 12px; font-size: 0.85rem; text-align: center;">
                                    ü§ù Paiement apr√®s satisfaction<br>
                                    Vous ne payez que si vous √™tes satisfait
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer style="background: var(--dark); color: white; padding: 4rem 2rem 2rem; text-align: center;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <p style="color: rgba(255,255,255,0.7); margin-bottom: 2rem; font-size: 1.05rem;">
                √âtudiants Ing√©nieurs Informatique ‚Ä¢ Passionn√©s de Code ‚Ä¢ Sites Sur Mesure ‚Ä¢ 250‚Ç¨ - 700‚Ç¨
            </p>
            <div style="display: flex; gap: 2rem; justify-content: center; margin-bottom: 2rem; flex-wrap: wrap;">
                <a href="index.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Accueil</a>
                <a href="portfolio.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Portfolio</a>
                <a href="tarifs.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Tarifs</a>
                <a href="contact.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Contact</a>
            </div>
            <p style="margin-top: 2rem; opacity: 0.5; font-size: 0.9rem;">
                ¬© 2025 Web Locations. Tous droits r√©serv√©s.
            </p>
        </div>
    </footer>

    <script>
        // Configuration
        let selectedPack = { value: 250, label: "Pack Essentiel", pack: "essentiel" };
        let selectedSupport = { value: 0, label: "1 mois" };

        // Fonction pour calculer et afficher le prix
        function updatePrice() {
            const total = selectedPack.value + selectedSupport.value;
            document.getElementById('total-price').textContent = total + '‚Ç¨';

            // Mise √† jour de la liste des options
            let optionsList = '';
            optionsList += `<div>‚úì ${selectedPack.label}</div>`;
            optionsList += `<div>‚úì Support ${selectedSupport.label} ${selectedSupport.value === 0 ? '(inclus)' : '(+' + selectedSupport.value + '‚Ç¨)'}</div>`;

            document.getElementById('options-list').innerHTML = optionsList;

            // Sauvegarder les s√©lections dans localStorage
            localStorage.setItem('tarifsSelection', JSON.stringify({
                pack: selectedPack,
                support: selectedSupport,
                totalPrice: total
            }));
        }

        // Gestion des packs
        function setupPacks() {
            const container = document.getElementById('pack-options');
            if (!container) return;
            const packs = container.querySelectorAll('.pack-card');

            packs.forEach(pack => {
                pack.addEventListener('click', function() {
                    // D√©s√©lectionner tous les packs
                    packs.forEach(p => p.classList.remove('selected'));
                    // S√©lectionner le pack cliqu√©
                    this.classList.add('selected');

                    const value = parseInt(this.getAttribute('data-value')) || 0;
                    const label = this.getAttribute('data-label') || '';
                    const packName = this.getAttribute('data-pack') || '';

                    selectedPack = { value, label, pack: packName };
                    updatePrice();
                });
            });
        }

        // Gestion du support
        function setupSupport() {
            const container = document.getElementById('support-options');
            if (!container) return;
            const options = container.querySelectorAll('.option-card');

            options.forEach(option => {
                option.addEventListener('click', function() {
                    // D√©s√©lectionner toutes les options
                    options.forEach(opt => opt.classList.remove('selected'));
                    // S√©lectionner l'option cliqu√©e
                    this.classList.add('selected');

                    const value = parseInt(this.getAttribute('data-value')) || 0;
                    const label = this.getAttribute('data-label') || '';

                    selectedSupport = { value, label };
                    updatePrice();
                });
            });
        }

        // Initialisation
        setupPacks();
        setupSupport();

        // Affiche le prix initial correctement
        updatePrice();

        // ==================== STRIPE INTEGRATION ====================
        // IMPORTANT: Remplacez 'pk_test_...' par votre cl√© publique Stripe
        const stripe = Stripe('pk_test_51QYxBLEYfK1FTW3rEwWu9sDm6DQGFjNOE3WkuRRvg1kUVQvRMpPGtHBhpAW0TXJwJPb4QqMFsHcOhxKrW9Qyx71B00gUQYPWir');

        // Fonction pour cr√©er une session Stripe Checkout
        async function createCheckoutSession() {
            const button = document.getElementById('checkout-button');
            button.disabled = true;
            button.textContent = '‚è≥ Chargement...';

            try {
                // R√©cup√©rer les informations du panier
                const total = selectedPack.value + selectedSupport.value;

                // Cr√©er la description du produit
                const description = `${selectedPack.label} + Support ${selectedSupport.label}`;

                // OPTION 1: Mode test simple - Redirection directe vers Stripe Checkout
                // Cr√©er une session de paiement c√¥t√© client (pour test uniquement)
                const { error } = await stripe.redirectToCheckout({
                    lineItems: [{
                        price_data: {
                            currency: 'eur',
                            product_data: {
                                name: selectedPack.label,
                                description: description,
                            },
                            unit_amount: total * 100, // Stripe utilise les centimes
                        },
                        quantity: 1,
                    }],
                    mode: 'payment',
                    successUrl: window.location.origin + '/portfolio-tom-julien/success.html?session_id={CHECKOUT_SESSION_ID}',
                    cancelUrl: window.location.href,
                });

                if (error) {
                    console.error('Erreur Stripe:', error);
                    alert('Erreur lors de la cr√©ation du paiement. Veuillez r√©essayer.');
                }
            } catch (error) {
                console.error('Erreur:', error);
                alert('Erreur lors de la cr√©ation du paiement. Veuillez r√©essayer ou nous contacter.');
            } finally {
                button.disabled = false;
                button.innerHTML = 'üí≥ Payer maintenant ‚Üí';
            }
        }

        // Attacher l'√©v√©nement au bouton de paiement
        document.getElementById('checkout-button').addEventListener('click', createCheckoutSession);
    </script>
</body>
</html>
