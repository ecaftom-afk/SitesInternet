<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paiement - Web Locations</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        .payment-card {
            background: white;
            padding: 2.5rem;
            border-radius: 24px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .payment-summary {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
        }

        .stripe-button {
            display: block;
            width: 100%;
            padding: 1.5rem;
            background: var(--gradient);
            color: white;
            text-align: center;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }

        .stripe-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4);
        }

        .secure-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .price-breakdown {
            border-top: 2px solid rgba(99, 102, 241, 0.1);
            padding-top: 1.5rem;
            margin-top: 1.5rem;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .price-row.total {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--primary);
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid var(--primary);
        }

        .info-box {
            background: rgba(99, 102, 241, 0.05);
            border-left: 4px solid var(--primary);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .info-box h3 {
            margin-top: 0;
            color: var(--primary);
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo" style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.8rem;">üè†</span>
                <span>Web Locations</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
                <li><a href="tarifs.html">Tarifs</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <div style="padding-top: 120px; min-height: 100vh; background: linear-gradient(135deg, rgba(99, 102, 241, 0.03) 0%, rgba(236, 72, 153, 0.03) 100%);">
        <section style="padding: 60px 0;">
            <div class="container" style="max-width: 800px; margin: 0 auto; padding: 0 2rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <div style="display: inline-block; background: var(--gradient); padding: 0.5rem 1.2rem; border-radius: 50px; color: white; font-weight: 700; font-size: 0.9rem; margin-bottom: 1rem;">
                        PAIEMENT S√âCURIS√â
                    </div>
                    <h1 style="font-size: 3rem; font-weight: 900; margin-bottom: 1rem; color: var(--dark);">
                        Votre site est <span style="background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">pr√™t !</span>
                    </h1>
                    <p style="font-size: 1.2rem; color: var(--gray);">
                        Payez uniquement si vous √™tes 100% satisfait
                    </p>
                </div>

                <div class="payment-card">
                    <h2 style="font-size: 1.8rem; font-weight: 900; margin-bottom: 1.5rem; color: var(--dark);">
                        üìã R√©capitulatif de votre devis
                    </h2>

                    <div class="payment-summary" id="payment-summary">
                        <div style="font-weight: 700; font-size: 1.2rem; margin-bottom: 1rem; color: var(--dark);">
                            Votre configuration :
                        </div>
                        <div id="config-details" style="font-size: 1rem; line-height: 2; color: var(--gray);">
                            <!-- Rempli par JavaScript -->
                        </div>
                    </div>

                    <div class="info-box" style="background: rgba(34, 197, 94, 0.05); border-left-color: #22c55e;">
                        <h3 style="color: #22c55e;">‚úÖ Notre garantie satisfaction</h3>
                        <ol style="margin: 0; padding-left: 1.5rem; line-height: 1.8;">
                            <li>Nous d√©veloppons votre site <strong>sans acompte</strong></li>
                            <li>Vous recevez un lien de pr√©visualisation de votre site termin√©</li>
                            <li>Vous testez et validez que tout correspond √† vos attentes</li>
                            <li>Vous payez <strong>uniquement si vous √™tes 100% satisfait</strong></li>
                            <li>Une fois le paiement re√ßu, nous publions votre site imm√©diatement</li>
                        </ol>
                    </div>

                    <div class="price-breakdown">
                        <div class="price-row total">
                            <span>Montant total √† payer :</span>
                            <span id="total-price">-</span>
                        </div>
                        <div style="text-align: center; margin-top: 1rem; color: #22c55e; font-weight: 600; font-size: 1rem;">
                            ‚úì Paiement apr√®s validation compl√®te
                        </div>
                    </div>

                    <!-- Bouton de paiement Stripe -->
                    <button id="stripe-payment-button" class="stripe-button">
                        üîí Payer maintenant - <span id="total-button-price">-</span> ‚Ç¨
                    </button>

                    <div class="secure-badge">
                        <span>üîí</span>
                        <span>Paiement s√©curis√© par Stripe ‚Ä¢ SSL/TLS ‚Ä¢ Conforme PCI DSS</span>
                    </div>

                    <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(236, 72, 153, 0.05); border-radius: 12px; text-align: center;">
                        <p style="margin: 0; color: var(--gray); font-size: 0.95rem;">
                            Besoin d'aide ? Contactez-nous :
                            <a href="mailto:contact.website@gmail.com" style="color: var(--primary); font-weight: 600;">contact.website@gmail.com</a>
                            ou <a href="tel:+33643697006" style="color: var(--primary); font-weight: 600;">+33 6 43 69 70 06</a>
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer style="background: var(--dark); color: white; padding: 4rem 2rem 2rem; text-align: center;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <p style="color: rgba(255,255,255,0.7); margin-bottom: 2rem; font-size: 1.05rem;">
                √âtudiants Ing√©nieurs Informatique ‚Ä¢ Passionn√©s de Code ‚Ä¢ Sites Sur Mesure ‚Ä¢ √Ä partir de 250‚Ç¨
            </p>
            <div style="display: flex; gap: 2rem; justify-content: center; margin-bottom: 2rem; flex-wrap: wrap;">
                <a href="index.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Accueil</a>
                <a href="portfolio.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Portfolio</a>
                <a href="tarifs.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Tarifs</a>
                <a href="contact.html" style="color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.3s; font-weight: 600;">Contact</a>
            </div>
            <p style="margin-top: 2rem; opacity: 0.5; font-size: 0.9rem;">
                ¬© 2025 Web Locations. Tous droits r√©serv√©s.
            </p>
        </div>
    </footer>

    <script>
        // Mapping des prix vers les liens de paiement Stripe
        // IMPORTANT: Vous devrez cr√©er ces liens dans votre dashboard Stripe et remplacer les URLs
        const STRIPE_PAYMENT_LINKS = {
            // Format: "prix_total": "lien_stripe_paiement_complet"
            "250": "https://buy.stripe.com/test_00wdR2568aZ25IzaQo0gw00", // Pack Essentiel + 1 mois support
            "300": "https://buy.stripe.com/test_3cI6oAfKM7MQ5Iz3nW0gw01", // Pack Essentiel + 3 mois support
            "450": "https://buy.stripe.com/test_7sY7sE5681os5Ize2A0gw05", // Pack Essentiel + 1 an support
            "400": "https://buy.stripe.com/test_fZubIU5688QUgnd3nW0gw04", // Pack Confort + 1 mois support
            "450": "https://buy.stripe.com/test_7sY7sE5681os5Ize2A0gw05", // Pack Confort + 3 mois support
            "600": "https://buy.stripe.com/test_bJe5kwaqs9UY2wngaI0gw08", // Pack Confort + 1 an support
            "600": "https://buy.stripe.com/test_bJe5kwaqs9UY2wngaI0gw08", // Pack Premium + 1 mois support
            "650": "https://buy.stripe.com/test_bJe5kwaqs9UY2wngaI0gw08", // Pack Premium + 3 mois support (√† cr√©er)
            "800": "https://buy.stripe.com/test_bJe5kwaqs9UY2wngaI0gw08", // Pack Premium + 1 an support (√† cr√©er)
        };

        // R√©cup√©rer les donn√©es du devis depuis localStorage
        function loadQuoteData() {
            const selection = localStorage.getItem('tarifsSelection');

            if (!selection) {
                // Rediriger vers la page tarifs si pas de donn√©es
                window.location.href = 'tarifs.html';
                return null;
            }

            return JSON.parse(selection);
        }

        // Afficher le r√©capitulatif
        function displaySummary() {
            const data = loadQuoteData();
            if (!data) return;

            const configDetails = document.getElementById('config-details');
            const totalPrice = document.getElementById('total-price');
            const totalButtonPrice = document.getElementById('total-button-price');

            // Afficher la configuration
            let configHTML = '';
            // Gestion du nouveau format avec "pack"
            if (data.pack) {
                configHTML += `<div>‚úì ${data.pack.label}</div>`;
            }
            // R√©trocompatibilit√© avec l'ancien format "pages"
            else if (data.pages) {
                configHTML += `<div>‚úì ${data.pages.label} - ${data.pages.example}</div>`;
            }
            if (data.support) {
                const supportPrice = data.support.value === 0 ? '(inclus)' : `(+${data.support.value}‚Ç¨)`;
                configHTML += `<div>‚úì Support ${data.support.label} ${supportPrice}</div>`;
            }
            configDetails.innerHTML = configHTML;

            // Afficher le prix total
            const total = data.totalPrice || 250;

            totalPrice.textContent = `${total}‚Ç¨`;
            totalButtonPrice.textContent = total;

            // Configurer le bouton de paiement
            setupPaymentButton(total);
        }

        // Configurer le bouton de paiement Stripe
        function setupPaymentButton(totalPrice) {
            const button = document.getElementById('stripe-payment-button');
            const stripeLink = STRIPE_PAYMENT_LINKS[totalPrice.toString()];

            if (stripeLink && !stripeLink.includes('VOTRE_LIEN')) {
                // Lien Stripe configur√©
                button.onclick = function() {
                    window.location.href = stripeLink;
                };
            } else {
                // Liens Stripe pas encore configur√©s - afficher un message
                button.onclick = function() {
                    alert('Les liens de paiement Stripe ne sont pas encore configur√©s.\n\n' +
                          'Veuillez suivre le guide GUIDE_STRIPE.txt pour cr√©er vos liens de paiement.\n\n' +
                          'Prix total: ' + totalPrice + '‚Ç¨');
                };
                button.style.opacity = '0.7';
                button.innerHTML = '‚ö†Ô∏è Configuration requise - Voir GUIDE_STRIPE.txt';
            }
        }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            displaySummary();
        });
    </script>
</body>
</html>
